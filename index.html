<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Camera App with Photo Editing
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: 'Roboto', sans-serif;
    }
    /* Hide the default file input */
    input[type="file"] {
      display: none;
    }
  </style>
 </head>
 <body class="bg-gray-100 min-h-screen flex flex-col items-center p-4">
  <h1 class="text-3xl font-bold mb-6 text-gray-800">
   Camera &amp; Photo Editor App
  </h1>
  <div class="w-full max-w-3xl bg-white rounded-lg shadow-lg p-6 flex flex-col md:flex-row gap-6">
   <!-- Camera Section -->
   <section class="flex-1 flex flex-col items-center">
    <div class="relative w-full max-w-md rounded-lg overflow-hidden border border-gray-300 shadow-sm bg-black">
     <video alt="Live camera feed showing a person in a bright room" autoplay="" class="w-full h-auto" id="video" playsinline="">
     </video>
     <canvas class="hidden" id="canvas">
     </canvas>
    </div>
    <button aria-label="Capture photo from camera" class="mt-4 px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md flex items-center justify-center gap-2" id="captureBtn">
     <i class="fas fa-camera">
     </i>
     Capture Photo
    </button>
    <label aria-label="Upload photo from device" class="mt-4 cursor-pointer px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md flex items-center justify-center gap-2" for="uploadInput">
     <i class="fas fa-upload">
     </i>
     Upload Photo
    </label>
    <input accept="image/*" id="uploadInput" type="file"/>
   </section>
   <!-- Photo Editing Section -->
   <section class="flex-1 flex flex-col items-center">
    <div class="w-full max-w-md rounded-lg overflow-hidden border border-gray-300 shadow-sm bg-gray-50 flex justify-center items-center min-h-[300px]">
     <img alt="Placeholder image showing a blank photo area with text 'No Photo Captured'" class="max-w-full max-h-[300px] object-contain" height="300" id="photo" src="https://storage.googleapis.com/a1aa/image/56f4373b-96eb-47d8-fb8a-422a8e70a883.jpg" width="400"/>
    </div>
    <div aria-label="Photo editing controls" class="mt-6 w-full max-w-md flex flex-col gap-4" id="editorControls">
     <div class="flex flex-col">
      <label class="mb-1 font-semibold text-gray-700" for="brightness">
       Brightness
      </label>
      <input aria-valuemax="200" aria-valuemin="0" aria-valuenow="100" class="w-full" id="brightness" max="200" min="0" type="range" value="100"/>
     </div>
     <div class="flex flex-col">
      <label class="mb-1 font-semibold text-gray-700" for="contrast">
       Contrast
      </label>
      <input aria-valuemax="200" aria-valuemin="0" aria-valuenow="100" class="w-full" id="contrast" max="200" min="0" type="range" value="100"/>
     </div>
     <div class="flex flex-col">
      <label class="mb-1 font-semibold text-gray-700" for="saturation">
       Saturation
      </label>
      <input aria-valuemax="200" aria-valuemin="0" aria-valuenow="100" class="w-full" id="saturation" max="200" min="0" type="range" value="100"/>
     </div>
     <div class="flex flex-col">
      <label class="mb-1 font-semibold text-gray-700" for="grayscale">
       Grayscale
      </label>
      <input aria-valuemax="100" aria-valuemin="0" aria-valuenow="0" class="w-full" id="grayscale" max="100" min="0" type="range" value="0"/>
     </div>
     <div class="flex flex-col">
      <label class="mb-1 font-semibold text-gray-700" for="sepia">
       Sepia
      </label>
      <input aria-valuemax="100" aria-valuemin="0" aria-valuenow="0" class="w-full" id="sepia" max="100" min="0" type="range" value="0"/>
     </div>
     <div class="flex justify-between gap-4 mt-4">
      <button aria-label="Reset all photo edits" class="flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md" id="resetBtn">
       <i class="fas fa-undo">
       </i>
       Reset
      </button>
      <button aria-label="Download edited photo" class="flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md" id="downloadBtn">
       <i class="fas fa-download">
       </i>
       Download
      </button>
     </div>
    </div>
   </section>
  </div>
  <script>
   const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const photo = document.getElementById('photo');
    const captureBtn = document.getElementById('captureBtn');
    const uploadInput = document.getElementById('uploadInput');
    const resetBtn = document.getElementById('resetBtn');
    const downloadBtn = document.getElementById('downloadBtn');

    const brightness = document.getElementById('brightness');
    const contrast = document.getElementById('contrast');
    const saturation = document.getElementById('saturation');
    const grayscale = document.getElementById('grayscale');
    const sepia = document.getElementById('sepia');

    let stream = null;
    let currentImage = null;

    // Start camera stream
    async function startCamera() {
      try {
        stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });
        video.srcObject = stream;
      } catch (err) {
        alert('Could not access the camera. Please allow camera access or use the upload option.');
      }
    }

    startCamera();

    // Capture photo from video stream
    captureBtn.addEventListener('click', () => {
      if (!stream) {
        alert('Camera not available.');
        return;
      }
      const width = video.videoWidth;
      const height = video.videoHeight;
      canvas.width = width;
      canvas.height = height;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(video, 0, 0, width, height);
      const dataUrl = canvas.toDataURL('image/png');
      currentImage = new Image();
      currentImage.onload = () => {
        photo.src = dataUrl;
        resetFilters();
      };
      currentImage.src = dataUrl;
    });

    // Upload photo from device
    uploadInput.addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function (event) {
        currentImage = new Image();
        currentImage.onload = () => {
          photo.src = event.target.result;
          resetFilters();
        };
        currentImage.src = event.target.result;
      };
      reader.readAsDataURL(file);
      uploadInput.value = '';
    });

    // Apply filters to photo
    function applyFilters() {
      const b = brightness.value;
      const c = contrast.value;
      const s = saturation.value;
      const g = grayscale.value;
      const sep = sepia.value;

      photo.style.filter = `
        brightness(${b}%)
        contrast(${c}%)
        saturate(${s}%)
        grayscale(${g}%)
        sepia(${sep}%)
      `;
    }

    brightness.addEventListener('input', applyFilters);
    contrast.addEventListener('input', applyFilters);
    saturation.addEventListener('input', applyFilters);
    grayscale.addEventListener('input', applyFilters);
    sepia.addEventListener('input', applyFilters);

    // Reset filters and sliders
    function resetFilters() {
      brightness.value = 100;
      contrast.value = 100;
      saturation.value = 100;
      grayscale.value = 0;
      sepia.value = 0;
      applyFilters();
    }

    resetBtn.addEventListener('click', () => {
      resetFilters();
    });

    // Download edited photo
    downloadBtn.addEventListener('click', () => {
      if (!currentImage) {
        alert('No photo to download.');
        return;
      }
      const tempCanvas = document.createElement('canvas');
      const ctx = tempCanvas.getContext('2d');
      tempCanvas.width = currentImage.width;
      tempCanvas.height = currentImage.height;

      // Apply filters to canvas context
      const b = brightness.value;
      const c = contrast.value;
      const s = saturation.value;
      const g = grayscale.value;
      const sep = sepia.value;

      ctx.filter = `
        brightness(${b}%)
        contrast(${c}%)
        saturate(${s}%)
        grayscale(${g}%)
        sepia(${sep}%)
      `;

      ctx.drawImage(currentImage, 0, 0, tempCanvas.width, tempCanvas.height);

      tempCanvas.toBlob((blob) => {
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'edited-photo.png';
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(url);
      }, 'image/png');
    });
  </script>
 </body>
         </html>
    
